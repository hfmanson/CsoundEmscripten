<!DOCTYPE html>
<<<<<<< HEAD
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="">
		<meta name="author" content="">
		<title>Csound Emscripten</title>
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<link href="css/bootstrap-theme.min.css" rel="stylesheet">
		<link href="css/theme.css" rel="stylesheet">

		<link href="css/bootstrap-switch.min.css" rel="stylesheet">
		<!--<script src="javascripts/bootstrap-switch.min.js"></script>	-->
		<script type="text/javascript" src="javascripts/require.js" data-main="javascripts/main"></script>
	</head>
	<body role="document">
		<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#">Csound Emscripten</a>
			</div>
		</div>
		</nav>

		<div class="container theme-showcase" role="main">

			<!-- Main jumbotron for a primary marketing message or call to action -->
			<!--<div class="jumbotron">-->
				<!--<h1>Csound Emscripten</h1>-->
				<!--</div>-->


			<div class="row">
				<div class="col-sm-8">
					<div class="panel panel-primary" id="EditorPanel">
						<div class="panel-heading">
							<div class="btn-group btn-group" role="group" aria-label="...">
								<button type="button" class="btn btn-primary btn-sm active" id="CSDEditorButton">CSD Editor</button>
								<button type="button" class="btn btn-primary btn-sm" id="ORCSCOEditorButton">ORC/SCO Editor</button>
							</div>
							<div class="btn-group btn-group pull-right">
								<button type="button" class="btn btn-primary btn-sm" id="CompileButton">Compile</button>
								<button type="button" class="btn btn-primary btn-sm" id="PerformButton">Perform</button>
								<button type="button" class="btn btn-primary btn-sm" id="ResetButton">Reset</button>
							</div>

						</div>

						<div class="panel-body" id="EditorSection">

						</div>
					</div>
					<div class="panel panel-primary" id="ConsolePanel">
						<div class="panel-heading">
							<div class="btn-group btn-group" role="group">
								<button type="button" class="btn btn-primary btn-sm" aria-label="..." id="ClearConsoleButton">Clear Console</button>
							</div>
						</div>
						<div class="panel-body" id="ConsoleSection">

						</div>
					</div>
				</div><!-- /.col-sm-4 -->

				<div class="col-sm-4">
					<div class="panel panel-primary">
						<div class="panel-heading">
							<h3 class="panel-title">Help</h3>
						</div>
						<div class="panel-body" id="helpText">
						</div>
					</div>
					<div class="panel panel-primary" id="InputPanel">
						<div class="panel-heading">
							<h3 class="panel-title">Input</h3>
						</div>
						<div class="panel-body">
							<div class="input-group">

								<input id="ControlName" type="text" class="form-control" value="channelName">
								<span class="input-group-addon">Control Channel Name</span>
							</div>
							<div class="range range-primary">
								<input id="ControlSlider"type="range" name="range" min="1" max="100" value="50">
								<output id="ControlSliderValue">50</output>
							</div>	
							</br>
							<div class="btn-group btn-group" role="group">

								  <label class="btn btn-primary btn-sm">

									  <input id="AudioInputButton" type="checkbox"> Audio Input
								  </label>

								  <label class="btn btn-primary btn-sm">

									  <input id="MidiInputButton" type="checkbox"> Midi Input
								  </label>

							</div>
						</div>
					</div>
					<div class="panel panel-primary" id="FilePanel">
						<div class="panel-heading">
							<label class="btn btn-primary btn-sm" for="FileButton">
								<input id="FileButton" type="file" style="display:none;">
								Upload Files
							</label>
						</div>
						<div class="panel-body" id="FileList">
						</div>
					</div>

				</div><!-- /.col-sm-4 -->
			</div>

		</body>
	</html>
=======
<html>
<head>
<link href='http://fonts.googleapis.com/css?family=Orienta' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="codemirror/lib/codemirror.css">
<link rel="stylesheet" href="codemirror/theme/eclipse.css">
<link rel="stylesheet" href="stylesheets/index.css">
<script src="javascripts/jquery.js" type="text/javascript"></script>
<script src="javascripts/fileToString.js" type="text/javascript"></script>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Csound Emscripten</title>
<script src="javascripts/libcsound.js"></script>
<script src="javascripts/CsoundObj.js"></script>
<script src="javascripts/OSCHelper.js"></script>
<script src="codemirror/lib/codemirror.js"></script>
<script src="codemirror/mode/javascript/javascript.js"></script>
<script>
window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder ||
                     window.MozBlobBuilder || window.MSBlobBuilder;
window.URL = window.URL || window.webkitURL;
var csoundObj = new CsoundObj();
var osc = new OSC();
osc.connect("ws://127.0.0.1:3333", csoundObj.setNamedControlChannelValue);
var csdFileReader = new FileReader();
var testFilePath = "test.csd";
var textEditor;
csdFileReader.onloadend = function()
{
	var data = new Uint8Array(csdFileReader.result);
	var stream = FS.open(testFilePath, 'w+');
	FS.write(stream, data, 0, data.length, 0);
	FS.close(stream);
	csoundObj.compileCSD(testFilePath);

}
compile = function()
{
	editorText = textEditor.getValue();
	textBlob = new Blob([editorText], {type:"text/plain"});
	csdFileReader.readAsArrayBuffer(textBlob);
}

perform = function()
{
	csoundObj.startAudioCallback();

}

stop = function()
{
	csoundObj.stopAudioCallback();

}

var fileReader = new FileReader();

var file;


fileReader.onload = (function(theFile) {
		return function(e) {

		console.log("Opened File %s", file.name);
		FS.createDataFile('/', file.name, e.target.result, true, false);

		};

		})(file)

function handleFileSelect(evt) {

	var files = evt.target.files;
	file = files[0];
	console.log(file.name);

	fileReader.readAsBinaryString(file);

}

FS.createDataFile('/', testFilePath, null, true, true);
function setEditorContentsCallback () {
	textEditor.setValue(this.responseText);
}
	
function setEditorContentsFromFile(filePath)
{
	loadFile(filePath, "text", setEditorContentsCallback);
}

var indexFilePath = "index.txt"

function loadContent(elementSelector, sourceUrl) {

	$(""+elementSelector+"").load(""+sourceUrl+"");

}
</script>
</head>
<body>

<div id="header">
<h1><a class="headerlink" href="javascript:loadContent('#widgets', 'blank.html');setEditorContentsFromFile(&quot;index.txt&quot;);">Csound Emscripten</a></h1>
</div>
<div class="colmask threecol">
<div class="colmid">
<div class="colleft">
<div class="col1">

<button class="button" onclick="compile();">Compile</button>
<button class="button" onclick="perform();">Perform</button>
<button class="button" onclick="stop();">Stop</button>

<textarea id="editor"></textarea> 
<script>
textEditor = CodeMirror.fromTextArea(document.getElementById("editor"),
		{lineWrapping:true, theme:"eclipse",lineNumbers: true,matchBrackets: true,mode: "htmlmixed"});
setEditorContentsFromFile("index.txt");
</script>
</div>
<div class="col2">
<h2>Tests</h2>
<ul>
<li><a href="javascript:loadContent('#widgets', 'tests/test1.html');setEditorContentsFromFile(&quot;tests/test1.csd&quot;);">Simple Test</a><li>
<li><a href="javascript:loadContent('#widgets', 'tests/test2.html');setEditorContentsFromFile(&quot;tests/test2.csd&quot;);">Audio File Test</a><li>
<li><a href="javascript:loadContent('#widgets', 'tests/test3.html');setEditorContentsFromFile(&quot;tests/test3.csd&quot;);">Mic Input Test</a><li>
<li><a href="javascript:loadContent('#widgets', 'tests/test4.html');setEditorContentsFromFile(&quot;tests/test4.csd&quot;);">Widget Test</a><li>
<li><a href="javascript:loadContent('#widgets', 'tests/test5.html');setEditorContentsFromFile(&quot;tests/test5.csd&quot;);">OSC Test</a><li>
</ul>
</div>
<div class="col3">
<h2>Widgets</h2>

<div id="widgets">
</div>
</div>
</div>
</div>
</div>
<div id="footer">

</div>

</body>
</html>
>>>>>>> e8f29b8184b70013f9527b1f2b439637d64d3af0

